@echo off
chcp 65001 >nul
echo ================================================
echo 保险销售智能陪练系统 - 预设数据初始化
echo ================================================

echo.
echo 正在检查后端服务...
curl -s http://127.0.0.1:8000/ >nul 2>&1
if errorlevel 1 (
    echo [错误] 后端服务未运行，请先启动后端！
    echo 启动命令: cd backend ^&^& python main.py
    pause
    exit /b 1
)

echo [成功] 后端服务正常运行
echo.
echo ================================================
echo 开始创建预设数据...
echo ================================================

echo.
echo === 创建客户角色 ===
curl -X POST http://127.0.0.1:8000/api/roles/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"小白客户\",\"description\":\"对保险了解不多，需要耐心解释\",\"difficulty\":\"简单\",\"system_prompt\":\"你是一个对保险了解不多的普通客户。\\n\\n【性格特征】\\n性格温和，对保险产品了解有限，容易被专业术语弄糊涂。\\n对销售人员比较信任，但需要简单易懂的解释。\\n\\n【背景情况】\\n- 年龄：35岁，已婚有一子\\n- 职业：公司职员，收入稳定\\n- 保险需求：想给孩子买教育金，但对保险不了解\\n\\n【对话特点】\\n- 会问很多基础问题：什么是保险？、保险有用吗？\\n- 需要用生活化的语言解释，避免专业术语\\n- 对价格敏感，需要性价比高的产品\\n- 容易被说服，只要解释清楚\\n\\n【异议类型】\\n1. 不理解保险的作用：保险不就是骗人的吗？\\n2. 担心保费太贵：这个保费太贵了，我负担不起\\n3. 犹豫不决：我回家和爱人商量一下\\n4. 信任问题：你们保险公司靠谱吗？\"}"

curl -X POST http://127.0.0.1:8000/api/roles/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"理性分析型\",\"description\":\"注重数据对比，需要详细说明\",\"difficulty\":\"中等\",\"system_prompt\":\"你是一个理性、注重数据分析的客户。\\n\\n【性格特征】\\n逻辑思维强，喜欢对比分析，不会被轻易说服。\\n对保险有一定了解，会深入研究产品细节。\\n\\n【背景情况】\\n- 年龄：40岁，硕士学历\\n- 职业：IT行业技术总监，收入较高\\n- 保险需求：给自己配置全面保障，重疾险+寿险+医疗险\\n\\n【对话特点】\\n- 会详细询问产品条款、保障范围、理赔条件\\n- 会对比多家公司的产品\\n- 要求销售人员用数据说话，不要只讲概念\\n- 关注IRR（内部收益率）、现金价值等财务指标\\n\\n【异议类型】\\n1. 质疑保障范围：这个病为什么不保？\\n2. 对比竞品：XX公司的产品比你们好\\n3. 怀疑销售夸大：你说的这些真的能兑现吗？\\n4. 要求透明化：把合同条款给我看清楚\"}"

curl -X POST http://127.0.0.1:8000/api/roles/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"价格敏感型\",\"description\":\"预算有限，需要高性价比产品\",\"difficulty\":\"困难\",\"system_prompt\":\"你是一个价格敏感、预算有限的客户。\\n\\n【性格特征】\\n精打细算，对每一分钱都很在意。\\n认为保险是可有可无的支出，能省则省。\\n\\n【背景情况】\\n- 年龄：30岁，单身\\n- 职业：普通工人，月收入5000元\\n- 保险需求：想买保险但预算有限，月预算不超过300元\\n\\n【对话特点】\\n- 一上来就问价格：多少钱一年？\\n- 会反复砍价：能不能便宜点？\\n- 质疑保险的必要性：我没钱买保险\\n- 喜欢对比不同产品的价格\\n\\n【异议类型】\\n1. 觉得保费太贵：太贵了，我买不起\\n2. 质疑性价比：这么贵能保障什么？\\n3. 推迟购买：等我有钱了再买\\n4. 怀疑被宰：你是不是在坑我钱？\"}"

curl -X POST http://127.0.0.1:8000/api/roles/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"怀疑抗拒型\",\"description\":\"对保险行业有偏见，需要建立信任\",\"difficulty\":\"困难\",\"system_prompt\":\"你是一个对保险行业有强烈偏见的客户。\\n\\n【性格特征】\\n固执己见，对保险行业非常不信任。\\n曾经听说或经历过保险理赔失败的案例。\\n\\n【背景情况】\\n- 年龄：45岁\\n- 职业：个体经营\\n- 保险需求：其实需要保险，但因为偏见而抗拒\\n\\n【对话特点】\\n- 态度冷淡，甚至带有敌意\\n- 经常打断销售人员的话\\n- 质疑保险公司的诚信：买时容易理赔难\\n- 引用负面案例：我朋友买了保险都没赔\\n\\n【异议类型】\\n1. 行业偏见：保险公司都是骗子\\n2. 理赔质疑：到时候肯定不赔钱\\n3. 不信任销售：你们就会忽悠人\\n4. 过往阴影：我之前被骗过\\n5. 认为保险不划算：存银行比买保险强\"}"

echo.
echo === 创建保险产品 ===
curl -X POST http://127.0.0.1:8000/api/products/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"少儿教育金保险\",\"description\":\"为孩子未来教育储备资金，兼顾保障\",\"product_type\":\"教育金\",\"coverage\":\"教育金+身故保障+保费豁免\",\"premium_range\":\"5000-20000元/年\",\"target_audience\":\"0-12岁儿童的父母\",\"detailed_info\":\"【产品特点】\\n1. 专款专用：确保孩子未来教育资金\\n2. 保费豁免：父母身故/全残免交后续保费\\n3. 灵活领取：高中、大学、创业多个阶段可领取\\n4. 复利增值：现金价值逐年增长\\n\\n【保障责任】\\n- 教育金：18-21岁每年领取大学教育金\\n- 满期金：22岁一次性领取创业金\\n- 身故保障：赔付已交保费或现金价值较大者\\n- 保费豁免：投保人身故/全残豁免后续保费\\n\\n【适用人群】\\n- 孕期准父母\\n- 0-12岁儿童的父母\\n- 重视子女教育的家庭\\n\\n【销售要点】\\n- 强调专款专用的教育金属性\\n- 突出保费豁免功能的重要性\\n- 说明早期投保的优势（保费低、积累期长）\\n- 可对比银行教育储蓄的收益\"}"

curl -X POST http://127.0.0.1:8000/api/products/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"终身重大疾病保险\",\"description\":\"覆盖100+种重疾，确诊即赔\",\"product_type\":\"重疾险\",\"coverage\":\"100+种重疾+20+种中症+40+种轻症+身故保障\",\"premium_range\":\"3000-15000元/年\",\"target_audience\":\"18-55岁健康人群\",\"detailed_info\":\"【产品特点】\\n1. 覆盖广：100+种重疾，20+种中症，40+种轻症\\n2. 确诊即赔：不限制用途，自由支配\\n3. 终身保障：保障至终身，无年龄限制\\n4. 多次赔付：重疾可多次赔付（可选）\\n\\n【保障责任】\\n- 重疾保险金：100种重疾，赔付100%保额\\n- 中症保险金：20种中症，赔付60%保额\\n- 轻症保险金：40种轻症，赔付30%保额\\n- 身故保险金：18岁后赔付100%保额\\n- 豁免保费：患轻症/中症后豁免后续保费\\n\\n【适用人群】\\n- 家庭经济支柱\\n- 健康状况良好的人群\\n- 需要长期保障的人群\\n\\n【销售要点】\\n- 强调重疾高发性和年轻化趋势\\n- 说明收入损失比医疗费用更严重\\n- 突出确诊即赔、不限用途的优势\\n- 年轻时投保保费更低、更容易通过核保\\n- 可附加医疗险、意外险完善保障\"}"

curl -X POST http://127.0.0.1:8000/api/products/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"定期寿险\",\"description\":\"低保费高保障，家庭责任必备\",\"product_type\":\"寿险\",\"coverage\":\"身故/全残保障\",\"premium_range\":\"500-3000元/年\",\"target_audience\":\"20-50岁家庭经济支柱\",\"detailed_info\":\"【产品特点】\\n1. 保费低：杠杆高，几百元撬动百万保障\\n2. 保障高：最高可达200万保额\\n3. 期限灵活：可选10/20/30年或保至60/70岁\\n4. 纯保障：无理财成分，专注保障\\n\\n【保障责任】\\n- 身故保险金：赔付100%保额\\n- 全残保险金：赔付100%保额\\n- 免责条款：极少（仅3条免责）\\n\\n【适用人群】\\n- 家庭经济支柱（上有老下有小）\\n- 房贷/车贷压力的家庭\\n- 刚步入社会的年轻人\\n- 保费预算有限的人群\\n\\n【销售要点】\\n- 强调家庭责任：如果不幸发生，留爱不留债\\n- 对比房贷：寿险保额至少覆盖房贷余额\\n- 对比收入：寿险保额至少是年收入的5-10倍\\n- 强调低保费高保障的杠杆效应\\n- 说明定期寿险最适合中青年时期\"}"

echo.
echo === 创建评分维度 ===
curl -X POST http://127.0.0.1:8000/api/dimensions/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"需求挖掘\",\"description\":\"是否准确了解客户真实需求和担忧\",\"weight\":20,\"evaluation_prompt\":\"请评估销售人员在需求挖掘维度的表现：\\n\\n【评估标准】\\n1. 提问质量（25分）\\n   - 是否提出开放式问题了解客户情况\\n   - 是否深入挖掘客户的真实需求\\n   - 是否了解客户的家庭结构、经济状况等\\n\\n2. 倾听能力（25分）\\n   - 是否认真倾听客户的回答\\n   - 是否根据客户反馈调整沟通策略\\n   - 是否捕捉到客户的隐性需求\\n\\n3. 需求确认（25分）\\n   - 是否总结并确认客户的需求\\n   - 是否找到客户最关注的问题点\\n   - 是否理解客户的核心痛点\\n\\n4. 针对性推荐（25分）\\n   - 推荐的产品是否符合客户需求\\n   - 是否说明产品如何解决客户问题\\n   - 保额、保费是否匹配客户预算\"}"

curl -X POST http://127.0.0.1:8000/api/dimensions/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"产品说明\",\"description\":\"产品介绍是否准确、清晰、易懂\",\"weight\":25,\"evaluation_prompt\":\"请评估销售人员在产品说明维度的表现：\\n\\n【评估标准】\\n1. 准确性（30分）\\n   - 产品介绍是否准确无误\\n   - 是否如实说明保障范围和免责条款\\n   - 是否夸大或误导性宣传\\n\\n2. 清晰度（30分）\\n   - 是否用通俗易懂的语言解释产品\\n   - 是否避免使用过多专业术语\\n   - 逻辑是否清晰，重点是否突出\\n\\n3. 针对性（20分）\\n   - 是否突出客户最关心的功能\\n   - 是否说明产品如何满足客户需求\\n   - 是否对比其他产品的优势\\n\\n4. 证据支持（20分）\\n   - 是否提供数据、案例等支持\\n   - 是否展示产品条款、计划书\\n   - 是否用可视化方式说明\"}"

curl -X POST http://127.0.0.1:8000/api/dimensions/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"异议处理\",\"description\":\"是否有效化解客户疑虑和反对意见\",\"weight\":25,\"evaluation_prompt\":\"请评估销售人员在异议处理维度的表现：\\n\\n【评估标准】\\n1. 情绪管理（25分）\\n   - 面对异议是否保持耐心和友善\\n   - 是否不与客户争辩或对立\\n   - 是否展现出同理心\\n\\n2. 异议识别（25分）\\n   - 是否准确理解客户异议的真实原因\\n   - 是否识别出表面的借口背后的真实担忧\\n   - 是否区分真实异议和虚假异议\\n\\n3. 处理技巧（30分）\\n   - 是否使用认同-转化技巧\\n   - 是否用案例、数据等说服客户\\n   - 是否采用提问引导客户自我说服\\n   - 是否有效化解客户疑虑\\n\\n4. 效果评估（20分）\\n   - 客户异议是否得到有效解决\\n   - 客户是否从反对转为接受\\n   - 是否增强了客户信任\"}"

curl -X POST http://127.0.0.1:8000/api/dimensions/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"促成能力\",\"description\":\"是否能有效引导客户完成购买决策\",\"weight\":30,\"evaluation_prompt\":\"请评估销售人员在促成能力的表现：\\n\\n【评估标准】\\n1. 时机把握（25分）\\n   - 是否准确判断客户的购买信号\\n   - 是否在合适的时机提出促成\\n   - 是否不急于求成也不拖延时机\\n\\n2. 促成技巧（35分）\\n   - 是否使用假设成交法\\n   - 是否使用二择一法\\n   - 是否利用稀缺性\\n   - 是否总结价值强化购买决心\\n\\n3. 临门一脚（25分）\\n   - 是否有效化解最后的犹豫\\n   - 是否给客户信心和安全感\\n   - 是否简化投保流程\\n\\n4. 专业性（15分）\\n   - 是否展现专业素养\\n   - 是否让客户感到值得信赖\\n   - 是否提供良好的服务体验\"}"

echo.
echo ================================================
echo 预设数据初始化完成！
echo ================================================
echo.
echo 现在您可以开始使用系统了！
echo 前端地址: http://localhost:5173
echo 管理后台: http://localhost:5173/#/admin
echo.
pause
