# æ¨¡å‹é…ç½®åŠŸèƒ½å®ç°å®ŒæˆæŠ¥å‘Š

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. åç«¯API (å·²å®ç°)

**æ–‡ä»¶**: `backend/app/api/models.py`

å·²åˆ›å»ºå®Œæ•´çš„æ¨¡å‹é…ç½®ç®¡ç†API:

- **GET** `/api/models/` - è·å–æ‰€æœ‰æ¨¡å‹é…ç½®
- **POST** `/api/models/` - åˆ›å»ºæ¨¡å‹é…ç½®
- **PUT** `/api/models/{id}` - æ›´æ–°æ¨¡å‹é…ç½®
- **DELETE** `/api/models/{id}` - åˆ é™¤æ¨¡å‹é…ç½®
- **POST** `/api/models/{id}/activate` - æ¿€æ´»æŒ‡å®šæ¨¡å‹

### 2. å‰ç«¯APIæ¥å£ (å·²å®ç°)

**æ–‡ä»¶**: `frontend/src/api/modules.js`

å·²æ·»åŠ æ¨¡å‹é…ç½®ç›¸å…³æ¥å£:

```javascript
export const getModels()
export const createModel(data)
export const updateModel(id, data)
export const deleteModel(id)
export const activateModel(id)
```

### 3. é€šä¹‰åƒé—®æ¨¡å‹é…ç½® (å·²æ·»åŠ )

å·²æˆåŠŸæ·»åŠ åˆ°æ•°æ®åº“:
- **æ¨¡å‹åç§°**: qwen-plus
- **æä¾›å•†**: é€šä¹‰åƒé—®
- **API Key**: sk-8b1831a371984c6483b413a759463619
- **APIåœ°å€**: https://dashscope.aliyuncs.com/compatible-mode/v1
- **çŠ¶æ€**: å·²æ¿€æ´»

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### æ–¹æ³•1: é€šè¿‡Swagger UI (æœ€ç®€å•)

1. è®¿é—® http://127.0.0.1:8000/docs
2. æ‰¾åˆ° `/api/models/` æ¥å£
3. ç‚¹å‡» "POST /api/models/" å±•å¼€æ¥å£
4. ç‚¹å‡» "Try it out"
5. å¡«å†™æ¨¡å‹é…ç½®å‚æ•°:
   ```json
   {
     "model_name": "gpt-4",
     "provider": "OpenAI",
     "api_key": "your-api-key",
     "api_base": "https://api.openai.com/v1",
     "is_active": false
   }
   ```
6. ç‚¹å‡» "Execute" æ‰§è¡Œ

### æ–¹æ³•2: é€šè¿‡curlå‘½ä»¤

```bash
# æ·»åŠ æ–°æ¨¡å‹
curl -X POST http://127.0.0.1:8000/api/models/ \
  -H "Content-Type: application/json" \
  -d '{
    "model_name": "deepseek-chat",
    "provider": "DeepSeek",
    "api_key": "your-api-key",
    "api_base": "https://api.deepseek.com/v1",
    "is_active": false
  }'

# æŸ¥çœ‹æ‰€æœ‰æ¨¡å‹
curl http://127.0.0.1:8000/api/models/

# æ¿€æ´»æ¨¡å‹
curl -X POST http://127.0.0.1:8000/api/models/1/activate

# æ›´æ–°æ¨¡å‹
curl -X PUT http://127.0.0.1:8000/api/models/1 \
  -H "Content-Type: application/json" \
  -d '{"api_key": "new-key"}'

# åˆ é™¤æ¨¡å‹
curl -X DELETE http://127.0.0.1:8000/api/models/1
```

### æ–¹æ³•3: é€šè¿‡Pythonè„šæœ¬

è¿è¡Œ `add_model_config.py` è„šæœ¬:

```bash
cd "e:\codeproject\Insurance Q&A System"
python add_model_config.py
```

---

## ğŸ”§ å¸¸ç”¨æ¨¡å‹é…ç½®ç¤ºä¾‹

### é€šä¹‰åƒé—® (å·²é…ç½®)
```json
{
  "model_name": "qwen-plus",
  "provider": "é€šä¹‰åƒé—®",
  "api_key": "sk-xxxxxxxxxxxx",
  "api_base": "https://dashscope.aliyuncs.com/compatible-mode/v1",
  "is_active": true
}
```

### DeepSeek
```json
{
  "model_name": "deepseek-chat",
  "provider": "DeepSeek",
  "api_key": "sk-xxxxxxxxxxxx",
  "api_base": "https://api.deepseek.com/v1",
  "is_active": false
}
```

### OpenAI GPT-4
```json
{
  "model_name": "gpt-4",
  "provider": "OpenAI",
  "api_key": "sk-xxxxxxxxxxxx",
  "api_base": "https://api.openai.com/v1",
  "is_active": false
}
```

### Claude
```json
{
  "model_name": "claude-3-sonnet",
  "provider": "Anthropic",
  "api_key": "sk-ant-xxxxxxxxxxxx",
  "api_base": "https://api.anthropic.com/v1",
  "is_active": false
}
```

### æ™ºè°±AI (GLM)
```json
{
  "model_name": "glm-4",
  "provider": "æ™ºè°±AI",
  "api_key": "xxxxxxxxxxxx",
  "api_base": "https://open.bigmodel.cn/api/paas/v4",
  "is_active": false
}
```

---

## ğŸ“‹ å‰ç«¯ç®¡ç†åå°é›†æˆ

å¦‚éœ€åœ¨ç®¡ç†åå°ç•Œé¢æ·»åŠ æ¨¡å‹é…ç½®Tabé¡µ,è¯·å‚è€ƒ:

**æ–‡æ¡£**: `MODEL_CONFIG_GUIDE.md`

è¯¥æ–‡æ¡£åŒ…å«è¯¦ç»†çš„å®ç°æ­¥éª¤å’Œä»£ç ç¤ºä¾‹,åŒ…æ‹¬:
- Tabé¡µé¢æ¨¡æ¿ä»£ç 
- æ•°æ®åŠ è½½å’Œå¤„ç†å‡½æ•°
- å¯¹è¯æ¡†è¡¨å•
- CRUDæ“ä½œæ–¹æ³•

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œå»ºè®®

### é€‰é¡¹A: ä½¿ç”¨Swagger UI (æ¨èæ–°æ‰‹)
ç›´æ¥ä½¿ç”¨ http://127.0.0.1:8000/docs çš„å¯è§†åŒ–ç•Œé¢ç®¡ç†æ¨¡å‹é…ç½®

### é€‰é¡¹B: é›†æˆåˆ°ç®¡ç†åå°
æŒ‰ç…§ `MODEL_CONFIG_GUIDE.md` ä¸­çš„è¯´æ˜,åœ¨å‰ç«¯ç®¡ç†åå°æ·»åŠ æ¨¡å‹é…ç½®Tabé¡µ

### é€‰é¡¹C: ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·
é€šè¿‡curlå‘½ä»¤æˆ–Pythonè„šæœ¬å¿«é€Ÿæ·»åŠ /ä¿®æ”¹æ¨¡å‹é…ç½®

---

## âœ… åŠŸèƒ½éªŒè¯

å½“å‰ç³»ç»Ÿå·²é…ç½®é€šä¹‰åƒé—®æ¨¡å‹,å¯ä»¥ç«‹å³ä½¿ç”¨:

1. åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
2. æ¨¡å‹é…ç½®å·²æ·»åŠ åˆ°æ•°æ®åº“
3. APIæ¥å£å¯æ­£å¸¸è®¿é—®
4. å‰ç«¯APIæ¥å£å·²å‡†å¤‡å°±ç»ª

---

## ğŸ“„ ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|:---|:---|
| `backend/app/api/models.py` | åç«¯æ¨¡å‹é…ç½®API |
| `backend/main.py` | å·²æ³¨å†Œæ¨¡å‹é…ç½®è·¯ç”± |
| `frontend/src/api/modules.js` | å‰ç«¯APIæ¥å£ |
| `add_model_config.py` | æ¨¡å‹é…ç½®æ·»åŠ è„šæœ¬ |
| `MODEL_CONFIG_GUIDE.md` | è¯¦ç»†å®ç°æŒ‡å— |

---

**çŠ¶æ€**: âœ… å®Œæˆ
**æœ€åæ›´æ–°**: 2025-12-30 22:54
