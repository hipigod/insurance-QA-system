# 保险销售智能陪练系统 PRD

## 文档信息
- **产品名称**：保险销售智能陪练系统（暂定）
- **文档版本**：v1.0 Demo版
- **创建日期**：2025-12-29
- **产品阶段**：Demo验证版

---

## 1. 需求背景

### 1.1 问题描述
保险行业销售人员在实际工作中面临以下挑战：
- **新人培训周期长**：需要大量实际客户沟通经验积累，但真实客户资源有限
- **实战机会少**：新销售缺乏与不同类型客户沟通的经验
- **产品知识掌握不足**：保险产品条款复杂，难以快速熟悉并准确传达
- **沟通技巧难以评估**：缺乏客观、标准化的能力评估体系
- **异议处理能力弱**：面对客户质疑时应变能力不足

### 1.2 目标用户
**主要用户**：
- 保险行业新人销售（0-6个月）
- 需要提升沟通技巧的在职销售人员
- 保险公司的培训部门

**用户特征**：
- 移动办公为主，使用手机时间超过80%
- 需要灵活的练习时间（碎片化学习）
- 对产品知识有学习需求，但缺乏系统性学习工具

### 1.3 业务目标
**短期目标（Demo阶段）**：
- 验证AI陪练模式的有效性
- 测试用户对智能评分的接受度
- 收集用户反馈，优化产品方向

**长期目标（正式版）**：
- 提升销售人员的客户沟通能力
- 缩短新人培训周期30%以上
- 建立标准化的销售能力评估体系
- 提高保险产品的销售转化率

---

## 2. 产品定位

### 2.1 产品定义
本产品是一款**面向保险销售人员的AI智能陪练平台**，通过模拟真实客户对话场景，帮助销售人员提升沟通能力、产品知识和营销技巧，并提供AI驱动的多维度能力评估。

### 2.2 核心价值
1. **随时练习**：打破时间地点限制，利用碎片化时间进行模拟销售练习
2. **真实场景**：AI模拟多种真实客户类型，提供接近真实的沟通体验
3. **智能评估**：基于AI的多维度评分体系，客观评估销售能力
4. **快速提升**：针对性的反馈和评价，帮助销售快速发现问题并改进
5. **知识巩固**：通过练习加深对保险产品的理解和记忆

### 2.3 产品差异化
| 对比维度 | 传统培训方式 | 本产品 |
|---------|------------|--------|
| 练习场景 | 角色扮演（同事互练） | AI模拟真实客户 |
| 时间灵活性 | 固定培训时间 | 随时随地练习 |
| 反馈及时性 | 培训师事后点评 | 实时AI评估 |
| 评估客观性 | 主观评价 | AI标准化评分 |
| 场景丰富度 | 有限 | 多种客户角色+产品组合 |
| 成本 | 高（人力成本） | 低（AI驱动） |

### 2.4 技术优势
- **大模型驱动**：利用国产大模型实现自然的对话交互和智能评估
- **RAG技术**：基于检索增强生成，确保AI回复的保险产品信息准确
- **多模型支持**：支持多种国产大模型，可根据需求灵活切换
- **向量数据库**：高效的产品知识库检索和匹配

---

## 3. 用户故事

### 3.1 销售人员（主要用户）

**故事1：新人小王的首次练习**
> "我刚加入保险公司2周，对产品还不够熟悉，也不知道该怎么跟客户沟通。我希望能找一个模拟客户练习一下，看看自己哪里需要改进。"

**用户需求**：
- 无需登录，直接开始练习
- 选择简单一点的产品和客户类型
- 练习后能看到详细的评分和建议
- 了解自己在哪些方面还需要提升

**产品解决方案**：
- 提供无需登录的快速开始入口
- 预设"小白客户"等简单角色
- 练习结束后展示多维度评分和评价
- 提供具体的改进建议

**故事2：资深销售李经理的技能提升**
> "我已经做了3年保险销售了，但最近遇到很多难缠的客户，总是搞不定。我想练习一下如何应对这类客户，看看我的问题出在哪里。"

**用户需求**：
- 选择有挑战性的客户角色（如"难缠客户"）
- 测试自己对产品的熟练程度
- 了解自己在异议处理方面的表现
- 查看历史练习记录，对比进步情况

**产品解决方案**：
- 提供"难缠客户"、"懂行客户"等高难度角色
- 异议处理能力专项识别和评估
- 本地保存练习历史，支持查看对比
- 针对性的改进建议

### 3.2 管理员/培训师（次要用户）

**故事3：培训师张老师的教学管理**
> "我需要为公司的新销售设置合适的练习场景和评分标准。希望能方便地配置客户角色特征、上传新的产品资料，并调整评分标准。"

**用户需求**：
- 后台管理界面
- 配置客户角色的提示词
- 上传产品文档（PDF/Word）
- 设置和调整评分维度
- 配置AI模型的API Key

**产品解决方案**：
- 提供后台管理系统
- 角色提示词配置功能
- 产品文档上传和向量化
- 评分标准配置（可增减维度）
- 模型配置和切换功能

---

## 4. 系统架构设计

### 4.1 整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                         前端层 (Vue.js)                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 角色选择  │  │ 产品选择  │  │ 对话界面  │  │ 评分报告  │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓ WebSocket/HTTP
┌─────────────────────────────────────────────────────────────┐
│                       后端层 (FastAPI)                       │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 用户服务  │  │ 对话服务  │  │ 评分服务  │  │ 配置服务  │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                        AI能力层                              │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 对话生成  │  │ 评分分析  │  │ 异议识别  │  │ 向量化    │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
│  ┌────────────────────────────────────────────────────┐    │
│  │        模型适配器 (支持多国产大模型)                 │    │
│  └────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                        数据层                                │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐                  │
│  │ SQLite   │  │ ChromaDB │  │ 本地存储  │                  │
│  │ (业务数据)│  │ (向量库)  │  │ (对话历史)│                  │
│  └──────────┘  └──────────┘  └──────────┘                  │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 核心模块说明

#### 4.2.1 前端模块
- **角色选择模块**：展示可选客户角色列表
- **产品选择模块**：展示可选保险产品列表
- **对话界面**：实时聊天界面，展示对话历史
- **评分报告**：展示评分结果和AI评价

#### 4.2.2 后端服务模块
- **用户服务**：管理用户会话和本地存储
- **对话服务**：处理实时对话，调用AI生成回复
- **评分服务**：对话结束后调用AI进行评分分析
- **配置服务**：管理后台配置（角色、评分标准、模型等）

#### 4.2.3 AI能力模块
- **对话生成**：根据角色提示词和对话历史生成AI回复
- **评分分析**：根据评分标准提示词分析对话质量
- **异议识别**：识别客户异议类型（价格、信任、需求、竞品等）
- **向量化服务**：对上传的产品文档进行向量化处理

### 4.3 人机交互节点

**交互流程**：
```
用户选择角色 → 选择产品 → 开始对话
     ↓
用户输入消息 → 后端调用AI → AI生成回复 → 返回给用户
     ↓
用户继续对话... (循环)
     ↓
用户结束对话 → 后端调用AI评分 → 展示评分报告
     ↓
本地保存练习记录 → 用户可查看历史
```

### 4.4 技术栈对比

| 技术选型 | Demo版 | 正式版 | 说明 |
|---------|--------|--------|------|
| 前端框架 | Vue 3 | Vue 3 | 保持一致 |
| 后端框架 | FastAPI | FastAPI | 异步支持好，便于AI集成 |
| 数据库 | SQLite | PostgreSQL | SQLite轻量，PostgreSQL支持高并发 |
| 向量数据库 | ChromaDB | ChromaDB/Milvus | 本地向量存储 |
| 大模型 | 国产多模型 | 国产多模型 | 支持切换 |
| 部署方式 | 本地运行 | 云服务部署 | Demo无需考虑部署 |

---

## 5. 用户旅程

### 5.1 完整用户旅程

```
┌────────────────────────────────────────────────────────────┐
│  阶段1: 进入产品                                           │
│  用户打开移动端网页 → 无需登录 → 直接进入主页              │
└────────────────────────────────────────────────────────────┘
                            ↓
┌────────────────────────────────────────────────────────────┐
│  阶段2: 场景选择                                           │
│  ① 浏览客户角色列表（小白客户、难缠客户、懂行客户等）      │
│  ② 选择一个客户角色                                        │
│  ③ 浏览保险产品列表（2-3款产品）                           │
│  ④ 选择一个产品进行练习                                    │
└────────────────────────────────────────────────────────────┘
                            ↓
┌────────────────────────────────────────────────────────────┐
│  阶段3: AI对话练习                                         │
│  ① 进入对话界面，AI客户根据角色特征主动打招呼              │
│  ② 用户输入回复内容                                        │
│  ③ AI根据角色特征、产品信息、对话历史生成回复              │
│  ④ 重复步骤2-3，进行多轮对话                               │
│  ⑤ 用户可随时结束对话                                      │
└────────────────────────────────────────────────────────────┘
                            ↓
┌────────────────────────────────────────────────────────────┐
│  阶段4: 评分反馈                                           │
│  ① 对话结束后，系统调用AI进行多维度评分                    │
│  ② 展示评分结果（百分制）                                  │
│  ③ 展示各维度详细评价                                      │
│  ④ 展示总体评价和改进建议                                  │
└────────────────────────────────────────────────────────────┘
                            ↓
┌────────────────────────────────────────────────────────────┐
│  阶段5: 持续改进                                           │
│  ① 练习记录保存到本地                                      │
│  ② 用户可查看历史练习记录                                  │
│  ③ 用户可重新练习，提升能力                                │
└────────────────────────────────────────────────────────────┘
```

### 5.2 关键用户体验设计原则

1. **移动优先**：界面设计优先考虑移动端体验
2. **零门槛启动**：无需登录注册，打开即用
3. **流畅对话**：AI响应时间控制在3秒以内
4. **清晰反馈**：评分报告直观易懂，提供具体改进建议
5. **本地存储**：练习历史本地保存，保护隐私

---

## 6. 系统工作流设计

### 6.1 传统流程 vs 智能工作流

**传统培训流程**：
```
新人入职 → 参加培训课程 → 角色扮演练习 → 培训师点评 → 实践反馈 → 循环改进
```

**AI智能陪练流程**：
```
打开应用 → 选择场景 → AI对话练习 → AI智能评分 → 查看评价建议 → 立即重新练习
```

**优势对比**：
- ⏱️ **时间效率**：从固定时间 → 随时随地
- 🎯 **场景丰富度**：从有限角色 → 无限组合
- 📊 **反馈及时性**：从事后点评 → 实时评估
- 🔄 **练习频率**：从定期培训 → 每日练习

### 6.2 完整系统工作流

```
┌──────────────┐
│  场景初始化  │
│ - 加载角色   │
│ - 加载产品   │
│ - 初始化对话 │
└──────┬───────┘
       ↓
┌──────────────┐
│  对话循环    │ ←───┐
│ - 用户输入   │     │
│ - 调用AI     │     │
│ - 生成回复   │     │
│ - 更新历史   │     │
└──────┬───────┘     │
       ↓             │
   [结束对话]? ─否───┘
       ↓是
┌──────────────┐
│  评分分析    │
│ - 完整对话   │
│ - 调用AI评分 │
│ - 异议识别   │
└──────┬───────┘
       ↓
┌──────────────┐
│  报告生成    │
│ - 汇总分数   │
│ - 生成评价   │
│ - 保存记录   │
└──────────────┘
```

### 6.3 各模块职责说明

| 模块 | 输入 | 输出 | 职责 |
|-----|------|------|------|
| 场景初始化 | 角色ID、产品ID | 初始对话消息 | 准备对话环境 |
| 对话服务 | 用户消息、对话历史 | AI回复、角色状态 | 维持对话流程 |
| 评分服务 | 完整对话记录 | 多维度分数、评价 | 分析对话质量 |
| 异议识别 | 对话记录 | 异议类型标签 | 识别客户异议 |
| 报告生成 | 评分数据、评价文本 | 结构化报告 | 整合展示结果 |

### 6.4 关键时序流程

**对话交互时序**：
```
用户 → 前端 → 后端 → AI服务
 1. 输入消息
    ↓
 2. 发送请求
    ↓
 3. 构建Prompt（角色+产品+历史）
    ↓
 4. 调用大模型
    ↓
 5. 解析响应
    ↓
 6. 返回给前端
    ↓
 7. 展示给用户
```

**评分分析时序**：
```
用户结束对话 → 后端 → AI服务
 1. 触发评分
    ↓
 2. 获取完整对话记录
    ↓
 3. 构建评分Prompt（对话+评分标准）
    ↓
 4. 调用大模型评分
    ↓
 5. 解析评分结果
    ↓
 6. 异议识别分析
    ↓
 7. 生成评分报告
    ↓
 8. 返回给前端展示
```

---

## 7. 功能清单

### 7.1 核心功能模块

#### 7.1.1 用户端功能

**F1. 场景选择**
- F1.1 浏览客户角色列表
  - 展示角色名称、简介、难度等级
  - 支持3-5种预置角色
- F1.2 选择客户角色
  - 单选，进入产品选择
- F1.3 浏览产品列表
  - 展示产品名称、简介
  - 支持2-3款预置产品
- F1.4 选择产品
  - 单选，开始对话

**F2. AI对话练习**
- F2.1 对话界面
  - 聊天气泡式展示
  - 区分用户消息和AI回复
  - 滚动查看历史消息
- F2.2 实时对话
  - 用户输入文本消息
  - AI根据角色特征生成回复
  - 响应时间 < 3秒
- F2.3 对话控制
  - 结束对话按钮
  - 对话过程中可随时退出
- F2.4 打字状态提示
  - AI思考时显示"正在输入..."

**F3. 评分报告**
- F3.1 总分展示
  - 百分制总分（0-100分）
  - 分数等级展示（优秀/良好/合格/需改进）
- F3.2 维度评分
  - 沟通能力（0-100分）
  - 有效营销（0-100分）
  - 产品熟练度（0-100分）
  - 异议处理能力（0-100分）
  - 每个维度显示等级评语
- F3.3 异议识别结果
  - 展示识别到的异议类型标签
  - 标签类型：价格异议、信任异议、需求异议、竞品异议等
  - 显示各类型出现次数
- F3.4 总体评价
  - AI生成的综合评语（200-300字）
  - 包含优点分析和改进建议
- F3.5 对话记录
  - 完整对话历史展示
  - 可滚动查看

**F4. 历史记录**
- F4.1 练习列表
  - 本地存储最近10条练习记录
  - 显示时间、角色、产品、总分
- F4.2 详情查看
  - 点击查看历史评分报告
  - 查看完整对话记录

**F5. 数据持久化**
- F5.1 本地存储
  - 使用浏览器LocalStorage
  - 存储练习记录和对话历史
  - 容量限制：最近10条记录

#### 7.1.2 管理后台功能

**F6. 角色配置**
- F6.1 角色列表管理
  - 查看、新增、编辑、删除角色
- F6.2 角色提示词配置
  - 角色名称、描述
  - 角色性格特征提示词
  - 对话风格、行为模式
  - 难度等级设置
- F6.3 角色预览
  - 测试角色对话效果

**F7. 产品知识库管理**
- F7.1 产品列表
  - 查看、新增、编辑、删除产品
- F7.2 产品信息配置
  - 产品名称、类型
  - 产品描述、适用人群
  - 保障范围、保费范围
- F7.3 文档上传
  - 支持PDF、Word格式
  - 文件大小限制 < 10MB
- F7.4 向量化处理
  - 自动对上传文档进行向量化
  - 存储到向量数据库
- F7.5 产品测试
  - 测试知识库检索效果

**F8. 评分标准配置**
- F8.1 评分维度管理
  - 查看、新增、编辑、删除评分维度
  - Demo版默认4个维度
- F8.2 维度提示词配置
  - 维度名称、描述
  - 评分标准说明
  - 评分依据提示词
- F8.3 权重设置
  - 各维度权重配置
  - 默认：各维度权重相同

**F9. AI模型配置**
- F9.1 模型列表
  - 支持的国产模型列表
  - 模型名称、供应商
- F9.2 API Key配置
  - 统一配置API Key
  - 支持多个模型Key
- F9.3 模型选择
  - 对话使用的模型
  - 评分使用的模型
  - 向量化使用的模型
- F9.4 模型测试
  - 测试模型连通性
  - 查看模型调用统计

**F10. 系统配置**
- F10.1 基础配置
  - 系统名称、Logo
  - 联系方式
- F10.2 对话参数配置
  - AI响应超时时间
  - 最大对话轮次
  - 温度参数等
- F10.3 数据管理
  - 清除本地缓存
  - 导出配置数据
  - 导入配置数据

### 7.2 智能化功能点

#### 7.2.1 AI对话生成
- **功能描述**：根据客户角色特征和产品信息，生成符合角色的自然对话回复
- **智能点**：
  - 角色一致性：AI始终保持角色性格特征
  - 上下文理解：理解对话历史，生成连贯回复
  - 产品知识融入：基于RAG技术，融入准确的产品信息
  - 异议表达：自然地提出各种客户异议

#### 7.2.2 AI智能评分
- **功能描述**：对完整对话进行多维度分析和评分
- **智能点**：
  - 多维度评估：同时评估4个维度
  - 语义理解：理解对话内容的质量
  - 客观公正：基于提示词标准进行评分
  - 个性化评价：生成针对性的评价建议

#### 7.2.3 异议类型识别
- **功能描述**：识别对话中客户提出的异议类型
- **智能点**：
  - 多标签识别：识别多种异议类型
  - 上下文理解：结合上下文判断异议
  - 统计分析：统计各类型异议出现频率
  - 应对评估：评估用户对异议的应对效果

#### 7.2.4 知识库向量化
- **功能描述**：将上传的产品文档转换为向量表示
- **智能点**：
  - 自动分块：智能分割文档文本
  - 语义向量化：保留语义信息的向量表示
  - 高效检索：快速检索相关知识
  - 多格式支持：支持PDF、Word等格式

---

## 8. 提示词/算法设计

### 8.1 客户角色生成提示词设计

**角色定义提示词模板**：
```
你是一个保险客户模拟角色，用于帮助保险销售人员练习沟通技巧。

【角色基本信息】
角色名称：{角色名称}
角色类型：{角色类型}（小白客户/懂行客户/难缠客户等）
年龄：{年龄}
职业：{职业}

【性格特征】
{性格特征描述}

【沟通风格】
{沟通风格描述}

【对保险的态度】
{对保险的态度描述}

【行为模式】
1. 对话开始时的主动问候方式
2. 提出异议的时机和方式
3. 决策时的表现
4. 常用语句和口头禅

【注意事项】
- 始终保持角色性格特征
- 根据销售人员的回应做出合理的反应
- 自然地提出各种客户异议（价格、信任、需求等）
- 如果销售人员的回答好，可以表示认可
- 如果回答不好，可以追问或表示质疑

当前选择的保险产品是：{产品名称}
产品简介：{产品简介}

现在，请以这个角色的身份与销售人员对话。请主动打招呼，开始对话。
```

**角色示例 - 小白客户**：
```
【性格特征】
- 对保险知识完全不了解
- 容易被专业术语困惑
- 犹豫不决，需要很多解释
- 担心被骗，比较谨慎

【沟通风格】
- 语言简单直接
- 经常问"是什么意思？"
- 会重复问同样的问题
- 对价格敏感

【对保险的态度】
- 觉得保险可能有用
- 但不确定是否需要
- 担心买了用不上
- 担心保费负担

【行为模式】
- 开场："你好，我听说有个保险，能给我讲讲吗？"
- 经常问："这个保什么？"、"要交多少钱？"、"真的有用吗？"
- 决策时："我再考虑考虑"、"我得回去问问家里人"
```

**角色示例 - 难缠客户**：
```
【性格特征】
- 多疑，不信任保险销售
- 挑剔，总能找出问题
- 价格敏感，觉得都贵
- 固执，难以被说服

【沟通风格】
- 语气强硬，质疑多
- 经常打断销售
- 喜欢对比其他公司产品
- 威胁要投诉或离开

【对保险的态度】
- 觉得保险都是骗人的
- 认为销售都是为了赚钱
- 不相信理赔承诺
- 觉得条款都是陷阱

【行为模式】
- 开场："你们保险都是忽悠人的，我想知道实话"
- 经常说："太贵了"、"别家更便宜"、"我不信你们"
- 决策时："我再看看吧，你们这个不行"
```

### 8.2 对话生成提示词设计

**对话生成提示词模板**：
```
【当前对话上下文】
角色设定：{角色提示词}
保险产品：{产品信息}
产品知识库：{相关知识检索结果}

【对话历史】
{对话历史记录}

【当前任务】
请根据你的角色设定，对销售人员的上一条消息做出回应。

要求：
1. 保持角色性格和语气一致
2. 根据对话历史做出合理的回应
3. 如果销售人员说得好，可以适当认可
4. 如果销售人员说得不好，可以质疑或追问
5. 自然地提出客户异议（价格、信任、需求、竞品等）
6. 回复长度控制在50-150字
7. 不要直接重复之前说过的内容

请生成你的回复：
```

### 8.3 评分标准提示词设计

**评分任务提示词模板**：
```
你是一个专业的保险销售培训师，负责评估销售人员的对话表现。

【评分维度】
维度1：沟通能力（权重25%）
- 评估点：语言表达、倾听能力、共情能力、回应及时性
- 优秀标准：表达清晰流畅，善于倾听，能共情客户，回应恰当

维度2：有效营销（权重25%）
- 评估点：需求挖掘、价值传递、异议处理、促成能力
- 优秀标准：准确挖掘客户需求，有效传递产品价值，妥善处理异议

维度3：产品熟练度（权重25%）
- 评估点：产品知识准确性、条款解释能力、产品推荐匹配度
- 优秀标准：产品知识准确，条款解释清楚，推荐产品匹配客户需求

维度4：异议处理能力（权重25%）
- 评估点：异议识别准确性、应对策略恰当性、说服效果
- 优秀标准：准确识别异议类型，采用恰当的应对策略，有效说服客户

【对话内容】
角色类型：{角色类型}
保险产品：{产品名称}

【完整对话记录】
{对话记录}

【评分要求】
1. 每个维度独立打分（0-100分）
2. 给出每个维度的具体评价（50字左右）
3. 识别客户提出的异议类型标签（价格异议、信任异议、需求异议、竞品异议等）
4. 生成总体评价（200-300字），包括：
   - 优点分析（2-3点）
   - 待改进点（2-3点）
   - 具体改进建议

【输出格式】
请按以下JSON格式输出：

{
  "总分": 85,
  "维度评分": {
    "沟通能力": {
      "分数": 88,
      "评价": "表达清晰流畅，善于倾听客户需求，能够共情客户的担忧..."
    },
    "有效营销": {
      "分数": 82,
      "评价": "能够挖掘客户需求，但在价值传递方面还可以加强..."
    },
    "产品熟练度": {
      "分数": 85,
      "评价": "产品知识掌握较好，条款解释准确..."
    },
    "异议处理能力": {
      "分数": 84,
      "评价": "能够识别客户异议，应对策略基本恰当..."
    }
  },
  "异议类型标签": ["价格异议", "信任异议", "需求异议"],
  "总体评价": "【优点】\n1. 表达清晰流畅，语言组织能力强...\n2. 产品知识掌握扎实，能够准确解释条款...\n\n【待改进】\n1. 在价值传递方面还可以加强，建议多用具体案例...\n2. 异议处理后的促成技巧需要提升...\n\n【建议】\n建议多练习如何用案例说明产品价值，以及如何在异议处理后自然地促成..."
}
```

### 8.4 异议识别提示词设计

**异议识别提示词**（已整合在评分提示词中）

异议类型定义：
- **价格异议**：客户觉得保费太贵、不划算、性价比低
- **信任异议**：客户不信任保险公司、不相信销售、担心被骗
- **需求异议**：客户认为自己不需要保险、已经有了保障、不急于购买
- **竞品异议**：客户提到其他公司产品、对比竞品、觉得别家更好
- **条款异议**：客户对条款有疑问、觉得看不懂、担心有陷阱
- **时机异议**：客户表示现在不是时机、需要再考虑、要和家人商量

### 8.5 知识库向量化提示词设计

**文档处理提示词**：
```
文档分块策略：
1. 按照段落或章节进行分块
2. 每块大小控制在200-500字
3. 保持语义完整性
4. 记录分块的元数据（章节、页码等）

向量化处理：
1. 使用{模型名称}的Embedding模型
2. 将文本块转换为向量表示
3. 存储到ChromaDB向量数据库
4. 建立索引以便快速检索

检索策略：
1. 用户提问时，将问题向量化
2. 计算与文档块的相似度
3. 返回Top-K最相关的文档块（K=3-5）
4. 将检索结果作为上下文提供给AI
```

**RAG检索提示词模板**：
```
【用户问题】
{用户提问内容}

【知识库检索结果】
相关文档1：{文档内容}
相关文档2：{文档内容}
相关文档3：{文档内容}

【任务】
基于以上知识库内容，回答用户的问题。如果知识库中没有相关信息，请告知用户该问题超出了你的知识范围。

注意：
1. 优先使用知识库中的信息
2. 如果知识库信息不够，可以基于通用保险知识补充
3. 明确区分"产品明确说明"和"通用保险知识"
4. 不要编造产品条款和保障范围
```

---

## 9. 数据集要求

### 9.1 交互数据集

#### 9.1.1 客户角色数据
**Demo版数据需求**：
- 预置3-5个客户角色
- 每个角色包含：
  - 角色基本信息（名称、类型、年龄、职业）
  - 性格特征描述（300-500字）
  - 沟通风格说明（200-300字）
  - 对保险的态度（200-300字）
  - 行为模式说明（300-500字）
  - 角色提示词（整合以上信息）

**数据来源**：
- 由产品经理和销售培训师共同设计
- 基于真实客户案例抽象提炼
- Demo版手动配置，正式版由AI生成

#### 9.1.2 保险产品数据
**Demo版数据需求**：
- 预置2-3款保险产品
- 每个产品包含：
  - 产品基本信息（名称、类型、保险公司）
  - 产品描述（200-300字）
  - 保障范围（详细说明）
  - 保费范围（价格区间）
  - 适用人群（目标客户）
  - 产品条款（详细文档）

**数据来源**：
- 客户提供的真实产品文档（PDF/Word）
- 产品手册、宣传材料
- Demo版手动上传配置

### 9.2 输出质量数据

#### 9.2.1 评分数据
**数据结构**：
- 总分（0-100整数）
- 各维度分数（0-100整数）
- 各维度评价文本（50-100字）
- 异议类型标签数组
- 总体评价文本（200-300字）

#### 9.2.2 对话记录数据
**数据结构**：
- 会话ID
- 角色ID
- 产品ID
- 对话时间戳
- 对话轮次
- 消息列表（角色、内容、时间）

### 9.3 数据收集策略

#### 9.3.1 Demo版数据收集
**收集目的**：
- 验证AI评分的准确性
- 优化提示词效果
- 收集用户反馈

**收集内容**：
- 用户练习记录（本地存储）
- AI评分结果
- 用户满意度反馈（可选）

**隐私保护**：
- Demo版数据仅存储在用户本地
- 不上传到服务器
- 不收集用户个人信息

#### 9.3.2 正式版数据收集（未来规划）
**收集目的**：
- 产品优化
- 评分标准改进
- 用户行为分析

**收集内容**：
- 匿名化的对话记录
- 评分结果统计
- 用户行为路径

**合规要求**：
- 获得用户明确同意
- 数据脱敏处理
- 符合隐私保护法规

---

## 10. 测试标准

### 10.1 功能测试标准

#### 10.1.1 对话功能测试
**测试用例**：
| 用例ID | 测试场景 | 预期结果 | 测试方法 |
|--------|---------|---------|---------|
| TC001 | 选择角色后开始对话 | AI主动打招呼 | 自动化测试 |
| TC002 | 发送消息后收到回复 | AI回复符合角色特征 | 人工测试 |
| TC003 | 连续对话10轮 | 对话连贯，角色一致 | 人工测试 |
| TC004 | 结束对话触发评分 | 生成评分报告 | 自动化测试 |
| TC005 | 对话响应时间 | < 3秒 | 性能测试 |

**验收标准**：
- AI回复成功率 ≥ 95%
- 角色一致性准确率 ≥ 90%（人工评估）
- 响应时间达标率 ≥ 98%

#### 10.1.2 评分功能测试
**测试用例**：
| 用例ID | 测试场景 | 预期结果 | 测试方法 |
|--------|---------|---------|---------|
| TC006 | 高质量对话评分 | 总分 ≥ 80分 | 人工评估对比 |
| TC007 | 低质量对话评分 | 总分 ≤ 50分 | 人工评估对比 |
| TC008 | 异议识别准确率 | ≥ 85% | 人工标注对比 |
| TC009 | 评分维度合理性 | 各维度分数有区分度 | 人工评估 |
| TC010 | 评价内容质量 | 评价具体、有针对性 | 人工评估 |

**验收标准**：
- AI评分与人工评分相关性 ≥ 0.7
- 异议识别准确率 ≥ 85%
- 评价内容满意度 ≥ 80%（用户反馈）

#### 10.1.3 后台配置测试
**测试用例**：
| 用例ID | 测试场景 | 预期结果 | 测试方法 |
|--------|---------|---------|---------|
| TC011 | 新增角色配置 | 角色在列表中显示 | 功能测试 |
| TC012 | 修改评分标准 | 评分时应用新标准 | 功能测试 |
| TC013 | 上传产品文档 | 文档成功向量化 | 功能测试 |
| TC014 | 切换AI模型 | 使用新模型生成回复 | 功能测试 |
| TC015 | 配置API Key | 模型调用成功 | 功能测试 |

**验收标准**：
- 配置生效成功率 100%
- 配置修改实时生效
- 配置错误有明确提示

### 10.2 性能测试标准

#### 10.2.1 响应时间要求
| 功能模块 | 响应时间要求 | 测试方法 |
|---------|-------------|---------|
| 角色列表加载 | < 1秒 | 自动化测试 |
| 产品列表加载 | < 1秒 | 自动化测试 |
| AI对话生成 | < 3秒 | 性能测试 |
| 评分报告生成 | < 5秒 | 性能测试 |
| 历史记录加载 | < 1秒 | 自动化测试 |

#### 10.2.2 并发性能要求（Demo版不要求）
Demo版为单机版本，不涉及并发性能。

### 10.3 用户体验测试标准

#### 10.3.1 易用性测试
**测试指标**：
- 新用户首次使用成功率 ≥ 90%
- 完成一次练习的平均时长 ≤ 10分钟
- 用户任务完成率 ≥ 95%

**测试方法**：
- 用户测试：5-10名用户试用
- 观察用户操作路径
- 收集用户困惑点

#### 10.3.2 满意度测试
**测试指标**：
- AI回复自然度满意度 ≥ 75%（1-5分）
- 评分准确性满意度 ≥ 70%（1-5分）
- 整体满意度 ≥ 75%（1-5分）

**测试方法**：
- 用户问卷调查
- 访谈反馈

### 10.4 线上监控指标（正式版）

Demo版暂不涉及线上部署和监控。

---

## 11. 异常处理与降级策略

### 11.1 异常场景定义

#### 11.1.1 AI模型相关异常
| 异常类型 | 触发条件 | 影响范围 |
|---------|---------|---------|
| API调用失败 | 网络问题、API Key错误 | 无法生成回复 |
| 模型响应超时 | 响应时间 > 10秒 | 用户体验差 |
| 模型返回错误 | 返回格式错误、内容异常 | 评分失败 |
| API额度耗尽 | 调用次数超限 | 无法使用 |

#### 11.1.2 系统相关异常
| 异常类型 | 触发条件 | 影响范围 |
|---------|---------|---------|
| 前端页面崩溃 | 浏览器兼容性问题 | 无法使用 |
| 后端服务崩溃 | 代码错误、资源耗尽 | 无法使用 |
| 数据库连接失败 | SQLite文件损坏 | 数据丢失 |
| 本地存储满 | LocalStorage超限 | 无法保存记录 |

### 11.2 降级流程图

```
┌──────────────┐
│  正常运行    │
└──────┬───────┘
       ↓
   [检测到异常]
       ↓
┌──────────────┐
│  异常分类    │
└──────┬───────┘
       ↓
┌─────────────────────────────────────┐
│  AI模型异常                         │
│  - 显示友好错误提示                 │
│  - 提供重试选项                     │
│  - 建议检查网络和配置               │
└─────────────────────────────────────┘
       ↓
┌─────────────────────────────────────┐
│  系统异常                           │
│  - 记录错误日志                     │
│  - 显示错误页面                     │
│  - 提供刷新选项                     │
└─────────────────────────────────────┘
       ↓
┌─────────────────────────────────────┐
│  数据异常                           │
│  - 提示数据可能丢失                 │
│  - 建议清除缓存                     │
│  - 提供重新开始选项                 │
└─────────────────────────────────────┘
```

### 11.3 异常处理方案

#### 11.3.1 AI调用失败处理
**场景1：对话生成失败**
```python
try:
    ai_response = call_ai_model(prompt)
    return ai_response
except APIError:
    return "抱歉，我现在无法回应。请稍后再试，或者结束本次对话。"
except TimeoutError:
    return "抱歉，响应超时。请重新发送消息，或者稍后再试。"
```

**场景2：评分生成失败**
```python
try:
    score_result = call_ai_scoring(dialogue_history)
    return score_result
except Exception:
    # 降级方案：返回默认评分和提示
    return {
        "总分": 60,
        "提示": "评分服务暂时不可用，请稍后再试。"
    }
```

#### 11.3.2 前端异常处理
**网络异常**：
- 显示"网络连接失败，请检查网络"
- 提供重试按钮
- 保存当前输入到草稿

**页面崩溃**：
- 自动记录错误日志
- 显示友好的错误页面
- 提供刷新页面选项

#### 11.3.3 数据异常处理
**本地存储失败**：
```javascript
try {
    localStorage.setItem('practice_record', data);
} catch (e) {
    if (e.name === 'QuotaExceededError') {
        alert('存储空间已满，请清除旧记录');
        // 清除最旧的记录
        clearOldestRecord();
        // 重试保存
        localStorage.setItem('practice_record', data);
    }
}
```

**数据库损坏**：
- 检测到SQLite损坏时，提示用户
- 自动重建数据库
- 通知用户数据可能丢失

### 11.4 用户友好的错误提示

| 错误类型 | 提示文案 | 解决建议 |
|---------|---------|---------|
| AI模型调用失败 | "AI助手暂时无法响应，请稍后再试" | 检查网络、重试 |
| API Key配置错误 | "AI模型配置有误，请联系管理员" | 检查后台配置 |
| 响应超时 | "响应超时，请重新发送消息" | 重新发送 |
| 存储空间不足 | "本地存储已满，请清除旧记录" | 清除记录 |
| 网络连接失败 | "网络连接失败，请检查网络设置" | 检查网络 |

---

## 12. 非功能性需求

### 12.1 性能需求

#### 12.1.1 响应时间
| 操作 | 性能要求 | 说明 |
|-----|---------|------|
| 页面加载 | < 2秒 | 移动端3G网络 |
| 角色列表加载 | < 1秒 | 首屏加载 |
| AI对话生成 | < 3秒 | 95%的请求 |
| 评分报告生成 | < 5秒 | 完整评分 |
| 历史记录加载 | < 1秒 | 本地读取 |

#### 12.1.2 资源占用
- 前端包大小：< 2MB（gzipped）
- 内存占用：< 200MB
- 本地存储空间：< 50MB

#### 12.1.3 可用性
- 系统可用率：≥ 99%（Demo版不严格要求）
- 故障恢复时间：< 5分钟

### 12.2 可用性需求

#### 12.2.1 移动端适配
- 支持主流移动浏览器
- 响应式设计，适配各种屏幕尺寸
- 触摸操作友好
- 软键盘适配良好

#### 12.2.2 易用性
- 无需学习即可开始使用
- 操作流程简洁直观
- 错误提示清晰友好
- 支持常见浏览器（Chrome、Safari、微信浏览器）

#### 12.2.3 无障碍（Demo版可选）
- 适当的字体大小（≥ 14px）
- 足够的点击区域（≥ 44x44px）
- 清晰的视觉对比度

### 12.3 安全需求

#### 12.3.1 数据安全
**Demo版**：
- API Key存储在本地，不暴露给前端
- 对话记录仅存储在用户本地
- 不收集用户个人信息

**正式版**：
- HTTPS加密传输
- API Key加密存储
- 用户数据加密存储
- 定期安全审计

#### 12.3.2 访问控制
**Demo版**：
- 无需登录，不涉及权限控制

**正式版**：
- 用户身份认证
- 角色权限管理
- 操作日志记录

#### 12.3.3 内容安全
- 对话内容过滤（避免不当内容）
- 防止恶意提示词注入
- 产品信息准确性保障

### 12.4 数据统计需求

#### 12.4.1 Demo版统计
**本地统计**：
- 用户练习次数
- 平均评分
- 常用角色和产品
- （仅存储在本地，不上报）

#### 12.4.2 正式版统计（未来）
**系统级统计**：
- 日活跃用户数
- 平均对话轮次
- 评分分布
- 模型调用次数和成功率
- 用户满意度

---

## 13. 迭代规划

### 13.1 MVP版本 (v1.0 Demo版)

#### 13.1.1 版本目标
- 验证AI陪练模式的可行性
- 测试用户接受度
- 收集反馈用于产品优化

#### 13.1.2 功能范围
**用户端**：
- ✅ 3-5个客户角色选择
- ✅ 2-3款保险产品选择
- ✅ 文字对话交互
- ✅ 4维度AI评分（沟通、营销、产品、异议处理）
- ✅ 异议类型识别
- ✅ 本地历史记录（最近10条）

**管理后台**：
- ✅ 角色提示词配置
- ✅ 评分标准配置（可增减维度）
- ✅ 产品文档上传（PDF/Word）
- ✅ AI模型配置（多模型切换、API Key）

**技术实现**：
- ✅ Vue 3 前端 + FastAPI 后端
- ✅ SQLite 数据库
- ✅ ChromaDB 向量数据库
- ✅ 国产大模型集成

#### 13.1.3 验收标准
- AI对话响应时间 < 3秒
- AI评分与人工评分相关性 ≥ 0.7
- 用户满意度 ≥ 75%
- 系统稳定性 ≥ 95%

#### 13.1.4 开发周期估算
- 需求确认：1周
- 技术方案设计：1周
- 开发实现：4-6周
- 测试优化：2周
- 总计：**8-10周**

### 13.2 后续版本规划

#### 13.2.1 v1.5 正式版（6个月后）
**新增功能**：
- 🔐 用户登录注册系统
- 🗣️ 语音交互（ASR+TTS）
- 🎯 测试模式（限时测试）
- 🏆 挑战模式（预设困难场景）
- 📊 进步曲线分析
- ☁️ 云端数据存储
- 📱 微信小程序版本

**技术升级**：
- SQLite → PostgreSQL
- 本地存储 → 云端存储
- 增加负载均衡
- CDN加速

#### 13.2.2 v2.0 进阶版（12个月后）
**新增功能**：
- 🤖 真实案例生成角色
- 🎭 真实对话记录生成角色
- 💡 实时提示功能
- 📈 能力雷达图
- 👥 团队管理功能
- 🏫 企业版功能
- 🎮 游戏化学习（积分、排行榜）

**AI能力提升**：
- 多模态理解（文字+语音）
- 情感识别
- 更精准的异议识别
- 个性化推荐练习

#### 13.2.3 v3.0 生态版（18个月后）
**新增功能**：
- 🌐 开放平台（API）
- 🔗 企业系统集成（CRM）
- 👨‍🏫 培训师管理系统
- 📚 课程体系管理
- 🤝 协作练习功能
- 🌍 多语言支持

**商业化**：
- 订阅制收费
- 企业版定制
- API开放平台

---

## 14. Demo实施计划

### 14.1 开发阶段划分

#### 阶段1：技术准备（Week 1-2）
**任务**：
- 搭建开发环境
- 技术栈选型确认
- AI模型调研和测试
- 架构设计评审

**交付物**：
- 技术架构文档
- 开发环境搭建完成
- AI模型测试报告

#### 阶段2：后端开发（Week 3-5）
**任务**：
- FastAPI项目搭建
- 数据库设计和创建
- AI服务集成（模型适配器）
- 对话服务开发
- 评分服务开发
- 向量化服务开发
- 后台管理API开发

**交付物**：
- 后端API接口文档
- AI服务集成完成
- 单元测试覆盖率 ≥ 70%

#### 阶段3：前端开发（Week 4-7，与后端并行）
**任务**：
- Vue 3项目搭建
- 移动端UI框架选择和配置
- 角色选择页面
- 产品选择页面
- 对话界面开发
- 评分报告页面
- 历史记录页面
- 后台管理页面

**交付物**：
- 前端页面完成
- 移动端适配完成
- 前后端联调通过

#### 阶段4：内容准备（Week 6-7）
**任务**：
- 准备3-5个客户角色
- 编写角色提示词
- 准备2-3款保险产品资料
- 编写评分标准提示词
- 测试角色效果

**交付物**：
- 角色配置数据
- 产品文档
- 评分标准配置

#### 阶段5：集成测试（Week 8）
**任务**：
- 功能测试
- 性能测试
- 用户体验测试
- Bug修复
- 优化调整

**交付物**：
- 测试报告
- Bug修复清单
- 性能优化报告

#### 阶段6：Demo验证（Week 9-10）
**任务**：
- 邀请5-10名用户试用
- 收集用户反馈
- 数据分析
- 迭代优化

**交付物**：
- 用户试用报告
- 反馈分析报告
- 产品优化建议

### 14.2 关键里程碑

| 里程碑 | 时间点 | 验收标准 |
|--------|--------|---------|
| M1: 技术方案确认 | Week 2 | 技术架构通过评审 |
| M2: AI服务集成完成 | Week 5 | AI对话和评分功能可用 |
| M3: 前后端联调完成 | Week 7 | 核心功能流程打通 |
| M4: 内部测试通过 | Week 8 | 功能测试用例通过率 ≥ 95% |
| M5: Demo版本发布 | Week 10 | 用户试用满意度 ≥ 75% |

### 14.3 资源需求

#### 14.3.1 人力资源
- 产品经理：1人（兼职，20%时间）
- 前端开发：1人（全职）
- 后端开发：1人（全职）
- UI设计师：1人（兼职，30%时间）
- 测试人员：1人（兼职，50%时间）

#### 14.3.2 技术资源
- 开发服务器：1台（本地开发即可）
- AI模型API费用：Demo版约 ¥500-1000/月
- 域名和服务器（Demo版不需要）

### 14.4 风险管理

| 风险类型 | 风险描述 | 应对措施 | 负责人 |
|---------|---------|---------|--------|
| 技术风险 | AI模型效果不理想 | 准备多个备选模型，充分测试 | 技术负责人 |
| 进度风险 | 开发周期延长 | 预留缓冲时间，砍掉非核心功能 | 项目经理 |
| 需求风险 | 需求变更频繁 | 需求冻结机制，变更评审 | 产品经理 |
| 资源风险 | AI API费用超预算 | 设置费用预警，控制调用次数 | 技术负责人 |

---

## 15. 附录

### 15.1 术语表

| 术语 | 英文 | 解释 |
|-----|------|------|
| RAG | Retrieval-Augmented Generation | 检索增强生成，结合知识检索的AI生成技术 |
| Embedding | - | 文本向量化，将文本转换为数值向量 |
| 向量数据库 | Vector Database | 存储和检索向量数据的数据库 |
| 提示词 | Prompt | 给AI模型的指令文本 |
| ASR | Automatic Speech Recognition | 自动语音识别 |
| TTS | Text-to-Speech | 文字转语音 |
| 异议处理 | Objection Handling | 处理客户反对意见的销售技巧 |

### 15.2 参考文档

- 国产大模型API文档（通义千问、文心一言、智谱AI等）
- Vue 3 官方文档
- FastAPI 官方文档
- ChromaDB 使用文档

### 15.3 联系方式

- 产品负责人：[待填写]
- 技术负责人：[待填写]
- 项目经理：[待填写]

---

## 文档变更记录

| 版本 | 日期 | 修改人 | 修改内容 |
|-----|------|--------|---------|
| v1.0 | 2025-12-29 | Claude | 初始版本创建 |

---

**PRD文档完成！**

下一步建议：
1. 组织需求评审会议，确认所有需求细节
2. 开始技术方案设计
3. 搭建开发环境
4. 启动Demo版开发
