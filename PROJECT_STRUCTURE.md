# ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ—ï¸ æ•´ä½“æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨**å‰åç«¯åˆ†ç¦»**æ¶æ„ï¼Œæ”¯æŒä¼ ç»Ÿå¼€å‘å’ŒDockerå®¹å™¨åŒ–éƒ¨ç½²ã€‚

```
Insurance Q&A System/
â”œâ”€â”€ backend/              # åç«¯æœåŠ¡ (FastAPI + Python)
â”œâ”€â”€ frontend/             # å‰ç«¯æœåŠ¡ (Vue 3 + Vite)
â”œâ”€â”€ docs/                 # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ scripts/              # å¼€å‘è„šæœ¬
â”œâ”€â”€ docker-compose.yml    # Dockerç¼–æ’é…ç½®
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

---

## ğŸ“‚ ç›®å½•ç»“æ„è¯¦è§£

### ğŸ¯ æ ¹ç›®å½•

```
Insurance Q&A System/
â”œâ”€â”€ docker-compose.yml          # DockeræœåŠ¡ç¼–æ’é…ç½®
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿
â”œâ”€â”€ .dockerignore               # Dockeræ„å»ºå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .gitignore                  # Gitç‰ˆæœ¬æ§åˆ¶å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ deploy.sh                   # Linux/Macè‡ªåŠ¨éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy.bat                  # Windowsè‡ªåŠ¨éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ PROJECT_STRUCTURE.md        # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â””â”€â”€ README.md                   # é¡¹ç›®ä¸»æ–‡æ¡£
```

#### æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | ç”¨é€” | å¿…éœ€æ€§ |
|------|------|--------|
| `docker-compose.yml` | Dockerå®¹å™¨ç¼–æ’ | Dockeréƒ¨ç½²å¿…éœ€ |
| `.env.example` | ç¯å¢ƒå˜é‡æ¨¡æ¿ | é…ç½®å‚è€ƒ |
| `.gitignore` | Gitå¿½ç•¥è§„åˆ™ | Gitç®¡ç†å¿…éœ€ |
| `deploy.sh/bat` | ä¸€é”®éƒ¨ç½²è„šæœ¬ | ä¾¿åˆ©å·¥å…· |

---

### ğŸ”§ Backend (åç«¯æœåŠ¡)

```
backend/
â”œâ”€â”€ Dockerfile                  # Dockeré•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ .dockerignore               # æ„å»ºå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ main.py                     # åº”ç”¨å…¥å£
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–åˆ—è¡¨
â”‚
â”œâ”€â”€ app/                        # åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ api/                    # APIè·¯ç”±å±‚
â”‚   â”‚   â”œâ”€â”€ roles.py           # å®¢æˆ·è§’è‰²ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ products.py        # ä¿é™©äº§å“ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ dialogue.py        # å¯¹è¯äº¤äº’API
â”‚   â”‚   â”œâ”€â”€ dimensions.py      # è¯„åˆ†ç»´åº¦ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ cases.py           # ä¼˜ç§€æ¡ˆä¾‹ç®¡ç†API
â”‚   â”‚   â””â”€â”€ models.py          # AIæ¨¡å‹é…ç½®API
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ config.py          # åº”ç”¨é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ database.py        # æ•°æ®åº“è¿æ¥ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”œâ”€â”€ models.py          # SQLAlchemy ORMæ¨¡å‹
â”‚   â”‚   â””â”€â”€ schemas.py         # PydanticéªŒè¯æ¨¡å‹
â”‚   â”‚
â”‚   â””â”€â”€ services/               # ä¸šåŠ¡æœåŠ¡å±‚
â”‚       â”œâ”€â”€ ai_service.py      # AIæ¨¡å‹æœåŠ¡
â”‚       â””â”€â”€ websocket_service.py  # WebSocketæœåŠ¡
â”‚
â””â”€â”€ data/                       # æ•°æ®å­˜å‚¨ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    â””â”€â”€ insurance_practice.db    # SQLiteæ•°æ®åº“æ–‡ä»¶
```

#### åç«¯æŠ€æœ¯æ ˆ

- **Webæ¡†æ¶**: FastAPI 0.109.0
- **å¼‚æ­¥è¿è¡Œæ—¶**: Uvicorn 0.27.0
- **ORM**: SQLAlchemy 2.0.36
- **æ•°æ®åº“**: aiosqlite (å¼‚æ­¥SQLite)
- **AIé›†æˆ**: OpenAI SDK 1.10.0
- **å®æ—¶é€šä¿¡**: WebSockets 12.0

#### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

| æ¨¡å— | åŠŸèƒ½ | æ–‡ä»¶ä½ç½® |
|------|------|----------|
| **å®¢æˆ·è§’è‰²ç®¡ç†** | CRUDæ“ä½œ | `app/api/roles.py` |
| **ä¿é™©äº§å“ç®¡ç†** | CRUDæ“ä½œ | `app/api/products.py` |
| **å¯¹è¯äº¤äº’** | WebSocketå®æ—¶å¯¹è¯ | `app/api/dialogue.py` |
| **AIè¯„åˆ†** | å¤šç»´åº¦æ™ºèƒ½è¯„åˆ† | `app/services/ai_service.py` |
| **ç®¡ç†åå°** | è§’è‰²é…ç½®ã€è¯„åˆ†é…ç½®ç­‰ | `app/api/*.py` |

---

### ğŸ¨ Frontend (å‰ç«¯æœåŠ¡)

```
frontend/
â”œâ”€â”€ Dockerfile                  # Dockeré•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ .dockerignore               # æ„å»ºå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ nginx.conf                  # Nginxåå‘ä»£ç†é…ç½®
â”œâ”€â”€ package.json                # Node.jsä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.js              # Viteæ„å»ºé…ç½®
â”‚
â”œâ”€â”€ src/                        # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.js                 # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ App.vue                 # æ ¹ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                    # APIæ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ index.js           # Axioså®ä¾‹é…ç½®
â”‚   â”‚   â””â”€â”€ modules.js         # APIæ¨¡å—å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ components/             # å…¬å…±ç»„ä»¶
â”‚   â”‚   â””â”€â”€ admin/             # ç®¡ç†åå°ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ RoleManagement.vue     # è§’è‰²ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ ProductManagement.vue  # äº§å“ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ ModelManagement.vue    # æ¨¡å‹é…ç½®
â”‚   â”‚       â””â”€â”€ DataExport.vue         # æ•°æ®å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ router/                 # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js           # è·¯ç”±å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ views/                  # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ Home.vue           # é¦–é¡µï¼ˆè§’è‰²/äº§å“é€‰æ‹©ï¼‰
â”‚   â”‚   â”œâ”€â”€ Dialogue.vue       # å¯¹è¯ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ Result.vue         # è¯„åˆ†ç»“æœ
â”‚   â”‚   â”œâ”€â”€ History.vue        # å†å²è®°å½•
â”‚   â”‚   â””â”€â”€ Admin.vue          # ç®¡ç†åå°
â”‚   â”‚
â”‚   â””â”€â”€ assets/                # é™æ€èµ„æº
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ dist/                       # æ„å»ºäº§ç‰©ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

#### å‰ç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3.4.15
- **æ„å»ºå·¥å…·**: Vite 5.4.21
- **UIåº“**: Element Plus 2.5.2
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1.7
- **è·¯ç”±**: Vue Router 4.2.5
- **HTTPå®¢æˆ·ç«¯**: Axios 1.6.5
- **å›¾æ ‡**: @element-plus/icons-vue 2.3.1

#### é¡µé¢è·¯ç”±

| è·¯ç”± | ç»„ä»¶ | åŠŸèƒ½ |
|------|------|------|
| `/` | Home.vue | é¦–é¡µ - é€‰æ‹©è§’è‰²å’Œäº§å“ |
| `/dialogue` | Dialogue.vue | å¯¹è¯ç•Œé¢ - AIé™ªç»ƒ |
| `/result` | Result.vue | è¯„åˆ†ç»“æœ - æŸ¥çœ‹æŠ¥å‘Š |
| `/history` | History.vue | å†å²è®°å½• - ç»ƒä¹ åˆ—è¡¨ |
| `/admin` | Admin.vue | ç®¡ç†åå° - ç³»ç»Ÿé…ç½® |

---

### ğŸ“š Docs (æ–‡æ¡£ç›®å½•)

```
docs/
â”œâ”€â”€ README.md                   # æ–‡æ¡£ä¸­å¿ƒå¯¼èˆª
â”‚
â”œâ”€â”€ guides/                     # ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ QUICKSTART.md          # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚   â”œâ”€â”€ DEPLOY_RUN.md          # éƒ¨ç½²è¿è¡ŒæŒ‡å—
â”‚   â”œâ”€â”€ WebæœåŠ¡å™¨éƒ¨ç½².md        # WebæœåŠ¡å™¨éƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ MODEL_CONFIG_GUIDE.md  # æ¨¡å‹é…ç½®æŒ‡å—
â”‚   â”œâ”€â”€ GIT_GUIDE.md           # Gitå·¥ä½œæµæŒ‡å—
â”‚   â”œâ”€â”€ å¯åŠ¨è¯´æ˜.md             # åº”ç”¨å¯åŠ¨è¯´æ˜
â”‚   â””â”€â”€ é¢„è®¾æ•°æ®è¯´æ˜.md         # é¢„è®¾æ•°æ®é…ç½®
â”‚
â”œâ”€â”€ prd/                        # äº§å“éœ€æ±‚
â”‚   â”œâ”€â”€ PRD-ä¿é™©é”€å”®æ™ºèƒ½é™ªç»ƒç³»ç»Ÿdemo-V1.2.md  # å®Œæ•´PRDæ–‡æ¡£
â”‚   â””â”€â”€ TEST_PLAN.md           # æµ‹è¯•è®¡åˆ’
â”‚
â””â”€â”€ reports/                    # æµ‹è¯•æŠ¥å‘Š
    â”œâ”€â”€ æµ‹è¯•æ€»ç»“æŠ¥å‘Š-V2.1-æœ€ç»ˆç‰ˆ.md
    â”œâ”€â”€ BUG-è¯„åˆ†æŠ¥å‘Šä¸ºç©º-ä¿®å¤æŠ¥å‘Š.md
    â”œâ”€â”€ Bugä¿®å¤æ€»ç»“.md
    â””â”€â”€ ... (å…¶ä»–æŠ¥å‘Š)
```

#### æ–‡æ¡£åˆ†ç±»

| ç›®å½• | ç”¨é€” | æ–‡æ¡£ç±»å‹ |
|------|------|----------|
| `guides/` | ä½¿ç”¨å’Œå¼€å‘æŒ‡å— | ç”¨æˆ·æ–‡æ¡£ã€å¼€å‘æ–‡æ¡£ |
| `prd/` | äº§å“éœ€æ±‚å’Œæµ‹è¯• | éœ€æ±‚æ–‡æ¡£ã€æµ‹è¯•è®¡åˆ’ |
| `reports/` | æµ‹è¯•å’ŒBugæŠ¥å‘Š | æµ‹è¯•æŠ¥å‘Šã€ä¿®å¤æŠ¥å‘Š |

---

### ğŸ› ï¸ Scripts (è„šæœ¬ç›®å½•)

```
scripts/
â”œâ”€â”€ æ•°æ®åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ init_demo_data.py      # åˆå§‹åŒ–æ¼”ç¤ºæ•°æ®
â”‚   â”œâ”€â”€ add_model_config.py    # æ·»åŠ æ¨¡å‹é…ç½®
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ ç³»ç»Ÿæµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ system_test.py         # ç³»ç»Ÿæµ‹è¯•
â”‚   â”œâ”€â”€ runtime_test.py        # è¿è¡Œæ—¶æµ‹è¯•
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ è·¯ç”±è¯Šæ–­è„šæœ¬
â”‚   â”œâ”€â”€ check_routes_detail.py # æ£€æŸ¥è·¯ç”±è¯¦æƒ…
â”‚   â”œâ”€â”€ debug_routes.py        # è°ƒè¯•è·¯ç”±é—®é¢˜
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ éƒ¨ç½²è„šæœ¬
    â”œâ”€â”€ start.bat              # Windowså¯åŠ¨è„šæœ¬
    â”œâ”€â”€ init_data.bat          # æ•°æ®åˆå§‹åŒ–è„šæœ¬
    â””â”€â”€ restart_backend.bat    # é‡å¯åç«¯è„šæœ¬
```

#### è„šæœ¬åˆ†ç±»

| ç±»å‹ | è„šæœ¬ç¤ºä¾‹ | ç”¨é€” |
|------|----------|------|
| **æ•°æ®åˆå§‹åŒ–** | `init_demo_data.py` | åˆå§‹åŒ–æ•°æ®åº“æ•°æ® |
| **ç³»ç»Ÿæµ‹è¯•** | `system_test.py` | æµ‹è¯•ç³»ç»ŸåŠŸèƒ½ |
| **è·¯ç”±è¯Šæ–­** | `check_routes_detail.py` | è¯Šæ–­è·¯ç”±é—®é¢˜ |
| **éƒ¨ç½²å·¥å…·** | `start.bat` | å¯åŠ¨åº”ç”¨ |

---

## ğŸ”„ æ–‡ä»¶æµè½¬å…³ç³»

### å¼€å‘æµç¨‹

```
1. å¼€å‘é˜¶æ®µ
   â”œâ”€ Backend: ä¿®æ”¹ä»£ç  â†’ é‡å¯æœåŠ¡ â†’ æµ‹è¯•API
   â””â”€ Frontend: ä¿®æ”¹ä»£ç  â†’ Viteçƒ­æ›´æ–° â†’ æµè§ˆå™¨é¢„è§ˆ

2. æ„å»ºé˜¶æ®µ
   â”œâ”€ Backend: æ— éœ€æ„å»ºï¼Œç›´æ¥è¿è¡Œ
   â””â”€ Frontend: npm run build â†’ ç”Ÿæˆdist/

3. éƒ¨ç½²é˜¶æ®µ
   â”œâ”€ ä¼ ç»Ÿéƒ¨ç½²: åˆ†åˆ«å¯åŠ¨å‰åç«¯æœåŠ¡
   â””â”€ Dockeréƒ¨ç½²: docker-compose up -d
```

### æ•°æ®æµå‘

```
ç”¨æˆ· â†’ Frontend (Vue)
      â†“ HTTP/WebSocket
   Backend (FastAPI)
      â†“
   AI Service (OpenAI SDK)
      â†“ APIè°ƒç”¨
   AI Model (DeepSeek/é€šä¹‰åƒé—®ç­‰)
      â†“ è¿”å›ç»“æœ
   Backend â†’ è¯„åˆ†/å›å¤ â†’ Frontend â†’ ç”¨æˆ·
```

---

## ğŸ“Š æ–‡ä»¶å¤§å°å‚è€ƒ

### å…¸å‹æ–‡ä»¶å¤§å°

| æ–‡ä»¶/ç›®å½• | å¤§å° | è¯´æ˜ |
|----------|------|------|
| `backend/` | ~5MB | æºä»£ç  + ä¾èµ–é…ç½® |
| `frontend/node_modules/` | ~300MB | å¼€å‘ä¾èµ–ï¼ˆä¸æäº¤Gitï¼‰ |
| `frontend/dist/` | ~2MB | æ„å»ºäº§ç‰© |
| `backend/data/*.db` | ~1MB | æ•°æ®åº“æ–‡ä»¶ |
| `docs/` | ~2MB | æ–‡æ¡£æ–‡ä»¶ |

### Dockeré•œåƒå¤§å°

| é•œåƒ | å¤§å° | è¯´æ˜ |
|------|------|------|
| `insurance-backend` | ~150MB | Python slimåŸºç¡€ |
| `insurance-frontend` | ~30MB | Nginx alpineåŸºç¡€ |
| **æ€»è®¡** | **~180MB** | ä¸¤ä¸ªé•œåƒ |

---

## ğŸ¯ å¼€å‘å·¥ä½œæµ

### æœ¬åœ°å¼€å‘

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
vim .env  # ç¼–è¾‘API_KEY

# 2. å¯åŠ¨åç«¯
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python main.py

# 3. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install
npm run dev
```

### Dockeréƒ¨ç½²

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
vim .env  # ç¼–è¾‘API_KEY

# 2. ä¸€é”®éƒ¨ç½²
./deploy.sh       # Linux/Mac
deploy.bat        # Windows

# æˆ–æ‰‹åŠ¨éƒ¨ç½²
docker-compose up -d
```

---

## ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½® (.env)

```env
# AIæ¨¡å‹é…ç½®ï¼ˆå¿…å¡«ï¼‰
MODEL_API_KEY=your_api_key_here
DEFAULT_MODEL=deepseek-chat
MODEL_API_BASE=https://api.deepseek.com/v1

# å¯¹è¯é…ç½®
AI_RESPONSE_TIMEOUT=25
AI_TEMPERATURE=0.7

# åº”ç”¨é…ç½®
DEBUG=False
```

### Viteé…ç½® (vite.config.js)

```javascript
export default defineConfig({
  plugins: [vue()],
  server: {
    port: 5173,
    proxy: {
      '/api': 'http://127.0.0.1:8000',
      '/ws': {
        target: 'ws://127.0.0.1:8000',
        ws: true
      }
    }
  }
})
```

---

## ğŸ” å®‰å…¨ç›¸å…³æ–‡ä»¶

### éœ€è¦ä¿æŠ¤çš„æ–‡ä»¶

è¿™äº›æ–‡ä»¶åœ¨ `.gitignore` ä¸­ï¼Œ**ä¸ä¼šæäº¤åˆ°Git**ï¼š

- `.env` - åŒ…å«APIå¯†é’¥
- `backend/data/*.db` - ç”¨æˆ·æ•°æ®
- `secrets/` - å¯†é’¥ç›®å½•
- `*.key`, `*.pem` - è¯ä¹¦æ–‡ä»¶

### é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” | æ˜¯å¦æäº¤ |
|------|------|----------|
| `.env.example` | é…ç½®æ¨¡æ¿ | âœ… æäº¤ |
| `.env` | å®é™…é…ç½® | âŒ ä¸æäº¤ |
| `.dockerignore` | Dockerå¿½ç•¥è§„åˆ™ | âœ… æäº¤ |
| `.gitignore` | Gitå¿½ç•¥è§„åˆ™ | âœ… æäº¤ |

---

## ğŸš€ å¿«é€Ÿå®šä½

### æˆ‘æƒ³ä¿®æ”¹...

**å‰ç«¯é¡µé¢** â†’ `frontend/src/views/*.vue`

**åç«¯API** â†’ `backend/app/api/*.py`

**æ•°æ®åº“æ¨¡å‹** â†’ `backend/app/models/models.py`

**AIæœåŠ¡** â†’ `backend/app/services/ai_service.py`

**è·¯ç”±é…ç½®** â†’ `frontend/src/router/index.js`

**APIæ¥å£** â†’ `frontend/src/api/modules.js`

**ç¯å¢ƒé…ç½®** â†’ `.env` æˆ– `backend/app/core/config.py`

**Dockeré…ç½®** â†’ `docker-compose.yml`

### æˆ‘æƒ³æŸ¥æ‰¾...

**ä½¿ç”¨æ–‡æ¡£** â†’ `docs/README.md`

**éƒ¨ç½²æŒ‡å—** â†’ `docs/DOCKER_DEPLOYMENT.md`

**æµ‹è¯•æŠ¥å‘Š** â†’ `docs/reports/`

**å¼€å‘è„šæœ¬** â†’ `scripts/`

---

## ğŸ“š æ‰©å±•é˜…è¯»

- [é¡¹ç›®ä¸»æ–‡æ¡£](README.md)
- [Dockeréƒ¨ç½²æŒ‡å—](docs/DOCKER_DEPLOYMENT.md)
- [æ–‡æ¡£ä¸­å¿ƒ](docs/README.md)
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](docs/guides/QUICKSTART.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: V1.0
**æœ€åæ›´æ–°**: 2026-01-05
**ç»´æŠ¤äººå‘˜**: é¡¹ç›®å¼€å‘ç»„
