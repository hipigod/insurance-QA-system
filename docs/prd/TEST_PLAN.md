# 测试计划与测试用例

**项目名称**: 保险销售智能陪练系统 Demo V1.2
**测试日期**: 2025-12-30
**测试目标**: 验证核心功能完整性，确保系统可正常运行

---

## 📋 测试范围

### 1. 后端API测试
- [ ] 角色管理API (增删改查)
- [ ] 产品管理API (增删改查)
- [ ] 评分维度管理API (增删改查)
- [ ] 优秀案例管理API (增删改查)
- [ ] 对话启动API
- [ ] 对话评分API

### 2. 前端功能测试
- [ ] 首页加载
- [ ] 场景选择(角色+产品)
- [ ] 管理后台入口
- [ ] 管理后台 - 角色管理
- [ ] 管理后台 - 产品管理
- [ ] 管理后台 - 评分维度管理
- [ ] 管理后台 - 案例管理
- [ ] 管理后台 - 数据导出

### 3. WebSocket实时对话测试
- [ ] 连接建立
- [ ] AI首次问候
- [ ] 多轮对话
- [ ] 异常处理
- [ ] 对话结束

### 4. AI评分功能测试
- [ ] 评分请求成功
- [ ] 评分结果格式正确
- [ ] 异议识别
- [ ] 总分计算

### 5. 集成测试
- [ ] 完整用户流程(选择→对话→评分→查看历史)
- [ ] 数据持久化
- [ ] 数据导入导出

---

## 🧪 详细测试用例

### TC001: 后端启动测试

**测试步骤**:
1. 激活虚拟环境
2. 运行 `python main.py`
3. 检查输出信息

**预期结果**:
```
🚀 保险销售智能陪练系统 v1.2.0 启动成功！
📍 API地址: http://127.0.0.1:8000/docs
INFO:     Uvicorn running on http://127.0.0.1:8000
```

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC002: 数据库初始化测试

**测试步骤**:
1. 运行 `python init_demo_data.py`
2. 检查输出信息

**预期结果**:
```
🎉 演示数据初始化完成！
   - 客户角色: 4 个
   - 保险产品: 3 个
   - 评分维度: 4 个
```

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC003: 角色API测试

**测试步骤**:
1. 访问 http://127.0.0.1:8000/docs
2. 测试 GET /api/roles/
3. 验证返回4个角色

**预期结果**:
```json
[
  {"id": 1, "name": "小白客户", "difficulty": "简单"},
  {"id": 2, "name": "懂行客户", "difficulty": "困难"},
  {"id": 3, "name": "难缠客户", "difficulty": "专家"},
  {"id": 4, "name": "犹豫客户", "difficulty": "普通"}
]
```

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC004: 产品API测试

**测试步骤**:
1. 测试 GET /api/products/
2. 验证返回3个产品

**预期结果**:
```json
[
  {"id": 1, "name": "重疾险无忧版"},
  {"id": 2, "name": "百万医疗险"},
  {"id": 3, "name": "定期寿险"}
]
```

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC005: 前端启动测试

**测试步骤**:
1. cd frontend
2. npm run dev
3. 访问 http://localhost:5173

**预期结果**:
- 页面正常加载
- 显示标题"保险销售智能陪练系统"
- 显示角色和产品列表

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC006: 场景选择功能测试

**测试步骤**:
1. 选择"小白客户"角色
2. 选择"重疾险无忧版"产品
3. 点击"开始对话练习"

**预期结果**:
- 按钮状态变为可点击
- 跳转到对话页面
- 显示AI首次问候

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC007: WebSocket连接测试

**测试步骤**:
1. 进入对话页面
2. 打开浏览器控制台(F12)
3. 查看WebSocket连接状态

**预期结果**:
- 控制台显示"WebSocket连接成功"
- 无错误信息

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC008: AI对话功能测试

**测试步骤**:
1. 在对话框输入"你好，我想了解一下保险"
2. 点击"发送"
3. 观察AI回复

**预期结果**:
- 显示"AI正在输入..."状态
- 5秒内收到AI回复
- AI回复符合角色特征
- 对话历史正确显示

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC009: AI评分功能测试

**测试步骤**:
1. 进行至少3轮对话
2. 点击"结束对话"
3. 等待评分完成

**预期结果**:
- 显示"正在评分..."状态
- 10秒内收到评分结果
- 评分结果包含:
  - 总分(0-100)
  - 4个维度评分
  - 异议类型标签
  - 总体评价

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC010: 管理后台访问测试

**测试步骤**:
1. 返回首页
2. 点击"管理后台"链接

**预期结果**:
- 跳转到/admin页面
- 显示5个标签页:
  - 客户角色管理
  - 保险产品管理
  - 评分维度管理
  - 优秀案例库
  - 数据导出

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC011: 角色编辑功能测试

**测试步骤**:
1. 进入"客户角色管理"标签
2. 点击"小白客户"的"编辑"按钮
3. 修改角色名称为"小白客户(测试)"
4. 点击"保存"

**预期结果**:
- 显示"更新成功"提示
- 角色列表更新
- 修改立即生效

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC012: 新增角色功能测试

**测试步骤**:
1. 点击"新增角色"
2. 填写以下信息:
   - 角色名称: "测试角色"
   - 简介: "这是一个测试角色"
   - 难度: "简单"
   - 提示词: "你是一个测试角色"
3. 点击"保存"

**预期结果**:
- 显示"创建成功"提示
- 新角色出现在列表中
- 可以在首页选择并使用

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC013: 数据导出功能测试

**测试步骤**:
1. 先完成一次练习并查看评分
2. 进入管理后台"数据导出"标签
3. 点击"导出为JSON"
4. 检查下载的文件

**预期结果**:
- 浏览器下载JSON文件
- 文件名格式: `练习记录_2025-12-30.json`
- 文件内容为有效JSON格式
- 包含完整的练习记录

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC014: 数据导入功能测试

**测试步骤**:
1. 清除LocalStorage: `localStorage.clear()`
2. 点击"选择JSON文件导入"
3. 选择刚才导出的JSON文件
4. 刷新页面查看历史记录

**预期结果**:
- 显示"成功导入X条记录"
- 历史记录页面显示导入的数据
- 数据完整性一致

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC015: 完整用户流程测试

**测试步骤**:
1. 打开首页
2. 选择角色和产品
3. 开始对话(3-5轮)
4. 结束对话查看评分
5. 返回首页查看历史
6. 进入管理后台编辑角色
7. 导出练习记录

**预期结果**:
- 所有功能正常工作
- 无报错或异常
- 数据流转正确
- 用户体验流畅

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

### TC016: 响应时间测试

**测试步骤**:
1. 测量AI对话响应时间(发送消息到收到回复)
2. 测量AI评分响应时间(结束对话到收到评分)
3. 记录实际耗时

**预期结果**:
- AI对话响应 < 5秒
- AI评分响应 < 10秒

**实际结果**:
- 对话响应: ___秒
- 评分响应: ___秒

**状态**: ✅ PASS / ❌ FAIL

---

### TC017: 异常处理测试

**测试步骤**:
1. 在未选择角色时点击开始
2. 输入空消息并尝试发送
3. 在对话中刷新页面
4. API Key配置错误时启动对话

**预期结果**:
- 显示友好的错误提示
- 系统不会崩溃
- 提供恢复建议

**实际结果**: ______________

**状态**: ✅ PASS / ❌ FAIL

---

## 📊 测试结果汇总

| 测试用例 | 状态 | 备注 |
|:---|:---|:---|
| TC001: 后端启动 | ⬜ | |
| TC002: 数据库初始化 | ⬜ | |
| TC003: 角色API | ⬜ | |
| TC004: 产品API | ⬜ | |
| TC005: 前端启动 | ⬜ | |
| TC006: 场景选择 | ⬜ | |
| TC007: WebSocket连接 | ⬜ | |
| TC008: AI对话 | ⬜ | |
| TC009: AI评分 | ⬜ | |
| TC010: 管理后台 | ⬜ | |
| TC011: 角色编辑 | ⬜ | |
| TC012: 新增角色 | ⬜ | |
| TC013: 数据导出 | ⬜ | |
| TC014: 数据导入 | ⬜ | |
| TC015: 完整流程 | ⬜ | |
| TC016: 响应时间 | ⬜ | |
| TC017: 异常处理 | ⬜ | |

**总计**: __ / 17 通过

---

## 🐛 Bug记录

| Bug ID | 严重程度 | 问题描述 | 状态 |
|:---|:---|:---|:---|
| BUG-001 | | | ⬜ 待修复 |

---

## ✅ 测试结论

**功能完整性**: ___________

**稳定性**: ___________

**用户体验**: ___________

**总体评价**: ___________

**建议**:
1. ___________
2. ___________
3. ___________

---

**测试人员**: Claude AI
**审核人员**: ___________
**测试日期**: 2025-12-30
